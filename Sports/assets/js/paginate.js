var tableData = [{
        'name': 'saad',
        'city': 'ashraf',
        'age': '1',
    },
    {
        'name': 'mohamed',
        'city': 'ashraf',
        'age': '2',
    },
    {
        'name': 'osma',
        'city': 'ashraf',
        'age': '3',
    },
    {
        'name': 'ali',
        'city': 'ashraf',
        'age': '4',
    },
    {
        'name': 'omar',
        'city': 'ashraf',
        'age': '5',
    },
    {
        'name': 'shady',
        'city': 'ashraf',
        'age': '6',
    },
    {
        'name': 'hady',
        'city': 'ashraf',
        'age': '7',
    },
    {
        'name': 'karam',
        'city': 'ashraf',
        'age': '8',
    },
    {
        'name': 'seif',
        'city': 'ashraf',
        'age': '9',
    },
    {
        'name': 'noor',
        'city': 'ashraf',
        'age': '19',
    },
    {
        'name': 'shaban',
        'city': 'ashraf',
        'age': '20',
    },
    {
        'name': 'hamdy',
        'city': 'ashraf',
        'age': '21',
    },
    {
        'name': 'bashar',
        'city': 'ashraf',
        'age': '22',
    },
    {
        'name': 'marzouk',
        'city': 'ashraf',
        'age': '23',
    },
    {
        'name': 'amira',
        'city': 'ashraf',
        'age': '24',
    },
    {
        'name': 'alyaa',
        'city': 'ashraf',
        'age': '25',
    },
    {
        'name': 'ayda',
        'city': 'ashraf',
        'age': '26',
    },
    {
        'name': 'Tom',
        'city': 'Brady',
        'age': '27',
    },
    {
        'name': 'Arron',
        'city': 'Rogers',
        'age': '28',
    },
    {
        'name': 'Patrick',
        'city': 'Mahoms',
        'age': '29',
    },
    {
        'name': 'Gardner',
        'city': 'Minshew',
        'age': '30',
    },
    {
        'name': 'Andrew',
        'city': 'Luck',
        'age': '31',
    },
    {
        'name': 'Josh',
        'city': 'Gordon',
        'age': '32',
    },
    {
        'name': 'Drew',
        'city': 'Brees',
        'age': '33',
    },
    {
        'name': 'Cam',
        'city': 'Newton',
        'age': '34',
    },
    {
        'name': 'Joe',
        'city': 'Montana',
        'age': '35',
    },
    {
        'name': 'Steve',
        'city': 'Young',
        'age': '36',
    },
    {
        'name': 'Dan',
        'city': 'Jones',
        'age': '37',
    },
    {
        'name': 'Eli',
        'city': 'Manning',
        'age': '38',
    },
    {
        'name': 'Marus',
        'city': 'Marriota',
        'age': '39',
    },
    {
        'name': 'Ryan',
        'city': 'Fitzpatrick',
        'age': '40',
    },
    {
        'name': 'Chad',
        'city': 'Pennington',
        'age': '41',
    },
    {
        "name": "Henrietta Rivers",
        "age": 31,
        "city": "DRAGOON"
    },
    {
        "name": "Mcintyre Lowery",
        "age": 28,
        "city": "CHURCHILL"
    },
    {
        "name": "Chrystal Herrera",
        "age": 22,
        "city": "CORAL"
    },
    {
        "name": "Ilene Hurley",
        "age": 27,
        "city": "ROSEDALE"
    },
    {
        "name": "Glenna Maldonado",
        "age": 27,
        "city": "GRACEY"
    },
    {
        "name": "Bender Meyers",
        "age": 28,
        "city": "IOLA"
    },
    {
        "name": "Shaffer Harrington",
        "age": 21,
        "city": "COMO"
    },
    {
        "name": "Woodard Pratt",
        "age": 29,
        "city": "VERDI"
    },
    {
        "name": "Leila Peterson",
        "age": 20,
        "city": "BLOOMINGTON"
    },
    {
        "name": "Bullock Cummings",
        "age": 32,
        "city": "NEWCASTLE"
    },
    {
        "name": "Maureen Wright",
        "age": 38,
        "city": "SPRINGHILL"
    },
    {
        "name": "Conley Pacheco",
        "age": 40,
        "city": "SOUDAN"
    },
    {
        "name": "Juliette Castillo",
        "age": 37,
        "city": "MAPLEWOOD"
    },
    {
        "name": "Liliana West",
        "age": 28,
        "city": "OASIS"
    },
    {
        "name": "Ann Wyatt",
        "age": 38,
        "city": "RIVERENO"
    },
    {
        "name": "Ball Owens",
        "age": 23,
        "city": "BLUETOWN"
    },
    {
        "name": "Ericka Peters",
        "age": 29,
        "city": "BOWIE"
    },
    {
        "name": "Denise Finley",
        "age": 25,
        "city": "HIGHLAND"
    },
    {
        "name": "Guadalupe Hale",
        "age": 30,
        "city": "TURAH"
    },
    {
        "name": "Anna Burch",
        "age": 38,
        "city": "GIBBSVILLE"
    },
    {
        "name": "Lynch Harrell",
        "age": 26,
        "city": "TRINWAY"
    },
    {
        "name": "Dillard Burgess",
        "age": 29,
        "city": "BANGOR"
    },
    {
        "name": "Richmond Santiago",
        "age": 32,
        "city": "BRANDYWINE"
    },
    {
        "name": "Blanca Duran",
        "age": 20,
        "city": "WAIKELE"
    },
    {
        "name": "Steele Huffman",
        "age": 26,
        "city": "SANDSTON"
    },
    {
        "name": "Gregory Bennett",
        "age": 23,
        "city": "MARTINEZ"
    },
    {
        "name": "Atkinson Sanford",
        "age": 36,
        "city": "GEYSERVILLE"
    },
    {
        "name": "Bryant Wall",
        "age": 39,
        "city": "CAMINO"
    },
    {
        "name": "Bernadine Hansen",
        "age": 22,
        "city": "FORBESTOWN"
    },
    {
        "name": "Molly Joyner",
        "age": 31,
        "city": "BRADY"
    },
    {
        "name": "Ebony Benton",
        "age": 35,
        "city": "HOLLYMEAD"
    },
    {
        "name": "Candice Berry",
        "age": 35,
        "city": "WEDGEWOOD"
    },
    {
        "name": "Meyer Ford",
        "age": 22,
        "city": "VENICE"
    },
    {
        "name": "Coffey Powers",
        "age": 26,
        "city": "FELT"
    },
    {
        "name": "Harriet Simpson",
        "age": 32,
        "city": "WALTON"
    },
    {
        "name": "Sharlene Gamble",
        "age": 27,
        "city": "DELTAVILLE"
    },
    {
        "name": "Erica Maddox",
        "age": 23,
        "city": "CHESTNUT"
    },
    {
        "name": "Margo Rasmussen",
        "age": 32,
        "city": "SWARTZVILLE"
    },
    {
        "name": "Ruthie Dunlap",
        "age": 36,
        "city": "CUTTER"
    },
    {
        "name": "Katherine Leach",
        "age": 30,
        "city": "HILLTOP"
    },
    {
        "name": "Johnston Stout",
        "age": 37,
        "city": "MORNINGSIDE"
    },
    {
        "name": "Shaffer Koch",
        "age": 24,
        "city": "SULTANA"
    },
    {
        "name": "Villarreal Bentley",
        "age": 31,
        "city": "JOPPA"
    },
    {
        "name": "Clark Romero",
        "age": 21,
        "city": "CONWAY"
    },
    {
        "name": "Georgia Munoz",
        "age": 28,
        "city": "CHICAL"
    },
    {
        "name": "Helga Graham",
        "age": 24,
        "city": "DALE"
    },
    {
        "name": "Elizabeth Witt",
        "age": 37,
        "city": "GERMANTON"
    },
    {
        "name": "Therese Chase",
        "age": 23,
        "city": "ALDEN"
    },
    {
        "name": "Jillian Rivers",
        "age": 23,
        "city": "FEDORA"
    },
    {
        "name": "Gay Lamb",
        "age": 32,
        "city": "TOLU"
    },
    {
        "name": "Gregory Crane",
        "age": 34,
        "city": "HASTY"
    },
    {
        "name": "Combs Mclean",
        "age": 22,
        "city": "LAVALETTE"
    },
    {
        "name": "Willa Rowe",
        "age": 38,
        "city": "LOOKINGGLASS"
    },
    {
        "name": "Priscilla Hughes",
        "age": 39,
        "city": "JACKPOT"
    },
    {
        "name": "Taylor Walters",
        "age": 29,
        "city": "STOLLINGS"
    },
    {
        "name": "Janie Emerson",
        "age": 20,
        "city": "HAMPSTEAD"
    },
    {
        "name": "James Mejia",
        "age": 38,
        "city": "WEEDVILLE"
    },
    {
        "name": "Olga Floyd",
        "age": 30,
        "city": "SYLVANITE"
    },
    {
        "name": "Mckay Sampson",
        "age": 27,
        "city": "LODOGA"
    },
    {
        "name": "Kris Holden",
        "age": 33,
        "city": "NORD"
    },
    {
        "name": "Elma Carey",
        "age": 25,
        "city": "MULINO"
    },
    {
        "name": "Wilson Bailey",
        "age": 33,
        "city": "YOGAVILLE"
    },
    {
        "name": "Adrian Holloway",
        "age": 34,
        "city": "MATTHEWS"
    },
    {
        "name": "Valarie Erickson",
        "age": 34,
        "city": "GLENSHAW"
    },
    {
        "name": "Frost White",
        "age": 27,
        "city": "DETROIT"
    },
    {
        "name": "Nora Carson",
        "age": 25,
        "city": "GRANITEVILLE"
    },
    {
        "name": "Mcclain Short",
        "age": 31,
        "city": "GOLCONDA"
    }
]

const myJSON = JSON.stringify(tableData);
localStorage.setItem("testJSON", myJSON);

// Retrieving data:
let text = localStorage.getItem("testJSON");
let obj = JSON.parse(text);
//console.log(obj);

obj.forEach(function(el, index) {
    $('#tb-body').append(`<tr>
            <td>` + el.name + `</td>
            <td>` + el.city + `</td>
            <td>` + el.age + `</td>
        </tr>`);
});

$(document).ready(function() {
    $('#example').DataTable();
});
/*
var state = {
    'querySet': obj,
    'page': 1,
    'rows': 5,
    'window': 4,
}

$('#pagination-rows').on('change', function() {
    //console.log($(this).val());
    state.rows = parseInt($(this).val());
    state.page = state.page;
    $('#users').html("");
    buildTable();
});

buildTable();

function pagination(querySet, page, rows) {

    var trimStart = (page - 1) * rows;
    var trimEnd = trimStart + rows;

    var trimmedData = querySet.slice(trimStart, trimEnd);

    var pages = Math.ceil(querySet.length / rows);

    return {
        'querySet': trimmedData,
        'pages': pages,
    }
}

function pageButtons(pages) {
    var wrapper = document.getElementById('pagination-wrapper');

    wrapper.innerHTML = ``;
    //console.log('Pages:', pages);

    var maxLeft = (state.page - Math.floor(state.window / 2));
    var maxRight = (state.page + Math.floor(state.window / 2));

    if (maxLeft < 1) {
        maxLeft = 1;
        maxRight = state.window;
    }

    if (maxRight > pages) {
        maxLeft = pages - (state.window - 1);

        if (maxLeft < 1) {
            maxLeft = 1;
        }
        maxRight = pages;
    }


    wrapper.innerHTML = `<button value=${state.page - 1} class="page btn btn-light">&#171; prev</button>`;

    for (var page = maxLeft; page <= maxRight; page++) {
        wrapper.innerHTML += `<button value=${page} id="page-link-${page}" class="page-links page mx-1 btn btn-light">${page}</button>`;
    }

    wrapper.innerHTML += `<button value=${state.page + 1} class="page btn btn-light">next &#187;</button>`;

    $(`#page-link-${state.page}`).addClass('active');
}

$(document).on('click', '.page', function() {
    var ch_page = Number($(this).val());
    var pp = Math.ceil(state.querySet.length / state.rows);

    if (ch_page == 0 || ch_page > pp) { return }

    $('#users').html("");

    state.page = Number($(this).val());

    buildTable();
});


function buildTable() {
    var usercontainer = $('#users');
    var data = pagination(state.querySet, state.page, state.rows);
    var myList = data.querySet;
    //console.log(myList);
    console.log(state.rows);
    myList.forEach((value) => {

        var user = `<div class="user">
    			        ${value.name}
    		        </div>`;

        usercontainer.append(user);
    });

    pageButtons(data.pages);

}
*/